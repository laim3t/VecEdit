# 导出构造文件格式说明

本文档详细说明了通过"导出构造文件"功能生成的 `.txt` 文件的格式规范。该文件由七个不同的区块组成，每个区块都由 `@@区块名_DEFINE` 开始，并由 `@@END_区块名_DEFINE` 结束。

---

### 第一部分：规格定义 (SPECIFICATIONS_DEFINE)

这个区块用于定义文件的基本规格信息。

- **开始标记:** `@@SPECIFICATIONS_DEFINE`
- **结束标记:** `@@END_SPECIFICATIONS_DEFINE`

**格式:**

```
@@SPECIFICATIONS_DEFINE
Section.Variable_2;1;//
@@END_SPECIFICATIONS_DEFINE
```

- 目前为固定内容，`Section.Variable_2;1;//` 是一个静态行。

---

### 第二部分：TimeSet 定义 (TIMESET_DEFINE)

这个区块定义了项目中所有的 TimeSet。每个 TimeSet 占一行。

- **开始标记:** `@@TIMESET_DEFINE`
- **结束标记:** `@@END_TIMESET_DEFINE`

**行格式:**
`TimeSetName;Period;PinNames;T1R;T1F;STBR;WaveType;//`

- **`TimeSetName`**: TimeSet 的名称 (字符串)。
- **`Period`**: 周期 (浮点数)。
- **`PinNames`**: 应用此 TimeSet 的管脚列表，用冒号 `:` 分隔 (例如 `PinA:PinB:PinC`)。
- **`T1R`**: T1R 值 (字符串)。
- **`T1F`**: T1F 值 (字符串)。
- **`STBR`**: STBR 值 (字符串)。
- **`WaveType`**: 波形类型 (字符串)。
- `//`: 行尾固定注释。

---

### 第三部分：标签定义 (Label_DEFINE)

这个区块列出了所有向量表中定义过的所有标签及其所属的表。

- **开始标记:** `@@Label_DEFINE`
- **结束标记:** `@@END_Label_DEFINE`

**行格式:**
`LabelName;TableName;//`

- **`LabelName`**: 标签的名称 (字符串)。
- **`TableName`**: 该标签所在的向量表的名称 (字符串)。
- `//`: 行尾固定注释。

---

### 第四部分：向量表定义 (TABLE_DEFINE)

这个区块描述了每个向量表的结构，主要是其包含的管脚和管脚类型。每个向量表占一行。

- **开始标记:** `@@TABLE_DEFINE`
- **结束标记:** `@@END_TABLE_DEFINE`

**行格式:**
`TableName;PinNames;PinTypes`

- **`TableName`**: 向量表的名称 (字符串)。
- **`PinNames`**: 表中所有管脚的名称列表，用冒号 `:` 分隔。
- **`PinTypes`**: 对应 `PinNames` 列表中每个管脚的类型，用冒号 `:` 分隔。

---

### 第五部分：向量行数据 (PATTERN_DEFINE)

这是最核心的部分，包含了每个向量表的具体行数据。**每个向量表对应一个独立的 `PATTERN_DEFINE` 区块。**

- **开始标记:** `@@PATTERN_DEFINE TableName` (注意，表名直接跟在标记后面)
- **结束标记:** `@@END_PATTERN_DEFINE`

**区块内行格式:**
`Label;PinValues;Instruction;TimeSet;Capture;Ext;Comment`

- **`Label`**: 当前行的标签，可以为空。
- **`PinValues`**: 对应第四部分中定义的管脚顺序，每个管脚的值用冒号 `:` 分隔。
- **`Instruction`**: 指令的文本名称 (不是ID)。
- **`TimeSet`**: TimeSet 的文本名称 (不是ID)。
- **`Capture`**: Capture 字段的值 (字符串)。
- **`Ext`**: Ext 字段的值 (字符串)。
- **`Comment`**: Comment 字段的值 (字符串)。

---

### 第六部分：管脚定义 (PIN_DEFINE)

这个区块定义了项目中所有唯一的管脚及其物理属性。每个管脚只出现一次，即使它被用在多个表中。

- **开始标记:** `@@PIN_DEFINE`
- **结束标记:** `@@END_PIN_DEFINE`

**行格式:**
`PinName;ChannelCount;StationBitIndex;SiteValue;//;//`

- **`PinName`**: 管脚名称 (字符串)。
- **`ChannelCount`**: 通道个数 (整数)。
- **`StationBitIndex`**: 工位位索引 (整数)。
- **`SiteValue`**: 工位值，格式为 `StationBitIndex:StationNumber` (字符串)。
- `//;//`: 行尾固定注释。

---

### 第七部分：管脚组定义 (PINGROUP_DEFINE)

这个区块用于定义管脚组。

- **开始标记:** `@@PINGROUP_DEFINE`
- **结束标记:** `@@END_PINGROUP_DEFINE`

**格式:**

```
@@PINGROUP_DEFINE
@@END_PINGROUP_DEFINE
```

- 目前该功能尚未实现，因此这是一个空的占位符区块。
